<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'"
    />
    <title>SmartLiving Control</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="app">
      <!-- Header -->
      <header class="header">
        <h1 class="header__title">SmartLiving</h1>
        <button id="settings-btn" class="header__btn" aria-label="Settings">
          <svg
            width="18"
            height="18"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <circle cx="12" cy="12" r="3" />
            <path
              d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"
            />
          </svg>
        </button>
      </header>

      <!-- Main Content -->
      <main class="main">
        <!-- Setup Screen (shown when no token) -->
        <section id="setup-screen" class="screen setup hidden">
          <div class="setup__icon">üè†</div>
          <h2 class="setup__title">Welcome to SmartLiving</h2>
          <p class="setup__text">
            Connect your SmartThings account to get started.
          </p>
          <button id="setup-btn" class="btn btn--primary">
            Connect SmartThings
          </button>
        </section>

        <!-- Device List -->
        <section id="devices-screen" class="screen devices">
          <div class="tabs">
            <button class="tab tab--active" data-tab="devices">Devices</button>
            <button class="tab" data-tab="scenes">Scenes</button>
          </div>

          <div id="devices-tab" class="tab-content">
            <div id="devices-list" class="devices__list">
              <!-- Devices loaded dynamically -->
            </div>
            <div id="devices-loading" class="loading">
              <div class="loading__spinner"></div>
              <p>Loading devices...</p>
            </div>
            <div id="devices-empty" class="empty hidden">
              <p>No devices found</p>
            </div>
          </div>

          <div id="scenes-tab" class="tab-content hidden">
            <div id="scenes-list" class="scenes__list">
              <!-- Scenes loaded dynamically -->
            </div>
          </div>
        </section>

        <!-- Settings Screen -->
        <section id="settings-screen" class="screen settings hidden">
          <div class="settings__header">
            <button id="settings-back" class="settings__back">‚Üê Back</button>
            <h2 class="settings__title">Settings</h2>
          </div>

          <div class="settings__content">
            <div class="setting">
              <label class="setting__label">SmartThings Token</label>
              <input
                type="password"
                id="token-input"
                class="setting__input"
                placeholder="Enter your token"
              />
              <button id="save-token" class="btn btn--small">Save</button>
            </div>

            <div class="setting">
              <label class="setting__label">
                <input type="checkbox" id="startup-checkbox" />
                Launch at startup
              </label>
            </div>

            <div class="setting-group" id="category-settings">
              <h3 class="setting-group__title">Visible Categories</h3>
              <div id="category-toggles" class="setting-group__content">
                <!-- Category toggles loaded dynamically -->
              </div>
            </div>

            <div class="setting">
              <button id="refresh-devices" class="btn btn--secondary">
                Refresh Devices
              </button>
            </div>
          </div>

          <p class="settings__info">
            Get your token at
            <a href="#" id="token-link">account.smartthings.com/tokens</a>
          </p>
        </section>
      </main>
    </div>

    <script src="../services/deviceTypes.js"></script>
    <script src="chart.min.js"></script>
    <script src="app.js"></script>
  </body>
</html>
